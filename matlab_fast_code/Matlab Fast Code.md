# Writing Fast MATLAB Code
## 简介
ATLAB 是一种原型环境，也就是说它追求语言灵活性，调试的交互性以及操作便利性，然而在性能指向上相比较于 C 和 FORTRAN 略逊一筹。虽然MATLAB可能不能和C一样快,然而通过一些手段我们可以使让MATLAB快起来，甚至和C差不多。

>**声明**  这不是一本MATLAB初学教程，而是一本操作教程。我们所讨论的方法是普遍较快的,但是没有一个声明规定什么是最快的。将它用在你的工作中吧！

在开始我们的话题之前，让我们暂时退一步来问我们自己真正想要的是什么。我们是否需要运行尽可能最快的代码？如果是这样，我们就需要转向一种性能型语言如C。更精确来说，我们希望书写，调试，运行以及最后获得结果都能花费更少的时间。这一部分的内容告诉我们了一些技巧，使我们能够更加聪明却不辛苦的写代码。
### M-Lint
在MATLAB较新的一些版本里，编辑器会自动指出可能出现的代码错误以及建议的优化方案，这些信息有助于改进程序和更深入得了解MATLAB。

```ruby
for k = 1:NumTrials
    r = rands;
    x(k) = runsim(r);
end  *'x'在循环中不断增加，考虑预分配速度

hist(x);  % 画出仿真输出的直方图
```

利用Tools->M-Lint->Show M-Lint Report 立刻查看M-Lint信息。
### 结构
* **为每一个工程建立一个单独的文件夹**  
为每个项目单独建立的文件夹可以将相关的文件保存在一起，同时也会简化对文件的复制和替代。

* **书写标题注释，尤其是H1行**  
标题注释的第一行被称作H1行。输入`help(cd)`，可以获得项目的所有文件列表以及他们的H1行。

* **将频繁使用的操作指令存成脚本**  
如果你发现自己重复使用一些固定的操作指令，就将这些指令存成脚本。更少的手动输入意味着更少机会的错误。

### 避免丢失数据
* **不要在脚本文件中使用`clear all`**  
这是一个不好的却很普遍的操作，这使任何储存在base workspace中的变量消失，且不可挽回。

* **提防覆盖**  
“文件覆盖”是指，当一个文件偶然被另外一个有相同文件名的文件覆盖，原文件中的数据丢失。这种现象也可能发生在变量上：

```
>> result = big_operation(input1);   % 存储一个耗时操作的结果
...
>> result = big_operation(input2);  % 其他输入又运行了一遍
```
变量`result`就被覆盖了，第一个输出也就丢失了。

* **提防哪些操作会使MATLAB崩溃**  
虽然通常来说MATLAB是很稳定的，但是如果使用第三方MEX函数或者进行存储密集型操作，例如载入视频或是大型矩阵等，都有可能造成MATLAB的崩溃。

现在有了良好的使用习惯，我们就开始讨论如何快速书写MATLAB代码。文章由话题组成，第一部分是关于在普遍的使用中的一些有用的技术，第二部分是一些详细的计算问题的介绍。
